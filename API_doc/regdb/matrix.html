<head>
<!-- Generated by perlmod2www.pl -->
<title>
matrix documentation.
</title>
</head>
<body bgcolor="white">
<HR><H4>regdb</H4>
<H3>matrix</H3>
<A NAME="TOP"></A>
<TABLE BORDER="1" WIDTH="100%"><TR>
<TD><A HREF="#SUMMARY">Summary</A></TD>
<TD><A HREF="#vardefs">Package variables</A></TD>
<TD><A HREF="#General">General documentation</A></TD>
<TD><A HREF="#Methods">Methods</A></TD>
</TR></TABLE><HR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR><TD BGCOLOR="#ffae84"><B>Summary</B></TD></TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%"><TR><TD><pre>matrix: methods to access matrix data<BR><BR>head1 SYNOPSIS<BR><BR>Methods to load and store matrix data<BR>Uses Bioperl (install bioperl-live)<BR></pre></TD></TR>
</TABLE>
<A NAME="vardefs"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Package variables</B></TD>
<TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0" WIDTH="100%"><TR><TD COLSPAN="2">No package variables defined.</TD></TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD WIDTH="150"><B>Included modules</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Matrix::PSM::SiteMatrix</font></b> </TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">DBI</font></b></TD></TR>
</TABLE>
<A NAME="SYNOPSIS"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Synopsis</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><FONT COLOR="RED">No synopsis!</FONT></TD></TR></TABLE>
<A NAME="DESCRIPTION"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Description</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><FONT COLOR="RED">No description!</FONT></TD></TR></TABLE>
<A NAME="Methods"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Methods</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE>
<TABLE BORDER="1" CELLSPACING="5"><TR><TD><B>interact_TF</B></TD><TD><A HREF="#POD1">Description</A></TD><TD><A HREF="#CODE1">Code</A></TD></TR>
<TR><TD><B>store_matrix</B></TD><TD><A HREF="#POD2">Description</A></TD><TD><A HREF="#CODE2">Code</A></TD></TR>
<TR><TD><B>store_matrix_info</B></TD><TD><A HREF="#POD3">Description</A></TD><TD><A HREF="#CODE3">Code</A></TD></TR>
</TABLE>
<A NAME="MethDesc"></A>
<HR><H2>Methods description</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_interact_TF"></A><A NAME="POD1"></A><B>interact_TF</B></TD><TD><A HREF="#CODE1">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD>prev</TD><TD><A HREF="#POD2">next</A></TD></TR></TABLE>
<pre> Function : adds an interaction between a matrix and TF<BR> Returns : <BR> Args    : <BR> Warnings: <BR> Notes   : <BR> Todo   : Introduce checks<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_store_matrix"></A><A NAME="POD2"></A><B>store_matrix</B></TD><TD><A HREF="#CODE2">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD1">prev</A></TD><TD><A HREF="#POD3">next</A></TD></TR></TABLE>
<pre> Function : store Bio::Matrix::PSM::SiteMatrix object into the database (compressed)<BR> Usage   : <BR> Returns : matrix_id of the new entry<BR> Args    : Bio::Matrix::PSM::SiteMatrix object<BR> Warnings: <BR> Notes   : Does not use the general handles, but initializes new ones, may need optimization for<BR>            large batches<BR> Todo   : Introduce checks<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_store_matrix_info"></A><A NAME="POD3"></A><B>store_matrix_info</B></TD><TD><A HREF="#CODE3">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD2">prev</A></TD><TD><A HREF="#POD4">next</A></TD></TR></TABLE>
<pre> Function : stores a matrix description into regdb<BR> Returns : <BR> Args    : matrix_id, species, ref_id and type<BR> Warnings: <BR> Notes   : <BR> Todo   : Introduce checks<BR></pre>
<A NAME="MethCode"></A>
<HR><H2>Methods code</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE1"></A><B>interact_TF</B></TD><TD><A HREF="#POD1">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30">prev</TD><TD WIDTH="30"><A HREF="#CODE2">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>interact_TF</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$aid</font>,<font color="#1f32ff">$mid</font>,<font color="#1f32ff">$tfid</font>,<font color="#1f32ff">$qual</font>,<font color="#1f32ff">$quant</font>,<font color="#1f32ff">$scale</font>,<font color="#1f32ff">$desc</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">add_input</font><font color="#0000ff"><b>(</b></font><font color="#007400">'matrix'</font>,<font color="#1f32ff">$mid</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">add_input</font><font color="#0000ff"><b>(</b></font><font color="#007400">'funct_TF'</font>,<font color="#1f32ff">$tfid</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">add_TF_interact</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$qual</font>,<font color="#1f32ff">$quant</font>,<font color="#1f32ff">$scale</font>,<font color="#1f32ff">$desc</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">store_analysis</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$iad</font><font color="#0000ff"><b>)</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE2"></A><B>store_matrix</B></TD><TD><A HREF="#POD2">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE1">prev</A></TD><TD WIDTH="30"><A HREF="#CODE3">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>store_matrix</b></font>
 {<pre>    
    <font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$matrix</font>,<font color="#1f32ff">$dbname</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
    <font color="#0000ff"><b>return</b></font> <font color="#4169e1"><b>undef</b></font> <font color="#0000ff"><b>unless</b></font>  <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>project<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>ne</b></font> <font color="#007400">'na'</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$pid</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>projectid<font color="#0000ff"><b>}</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@a</font>=<font color="#1f32ff">$matrix</font>-&gt;<font color="#ff8204">get_array</font><font color="#0000ff"><b>(</b></font><font color="#007400">'A'</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@c</font>=<font color="#1f32ff">$matrix</font>-&gt;<font color="#ff8204">get_array</font><font color="#0000ff"><b>(</b></font><font color="#007400">'C'</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@g</font>=<font color="#1f32ff">$matrix</font>-&gt;<font color="#ff8204">get_array</font><font color="#0000ff"><b>(</b></font><font color="#007400">'G'</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@t</font>=<font color="#1f32ff">$matrix</font>-&gt;<font color="#ff8204">get_array</font><font color="#0000ff"><b>(</b></font><font color="#007400">'T'</font><font color="#0000ff"><b>)</b></font>;
    <font color="#ff0000">##Compressing</font><BR>    <font color="#1f32ff">$matrix_q</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select matrix_id from matrix where DB_source_id = ?  and DB_accn = ? and description = ? and project_id=?"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$matrix_i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"insert into matrix (DB_source_id,DB_accn,vectorA,vectorc,vectorG,vectorT,description,project_id) values (?,?,?,?,?,?,?,<font color="#1f32ff">$pid</font>)"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ca</font>=<font color="#8000ff"><b>Bio::Matrix::PSM::SiteMatrix</b></font>::<font color="#ff8204">_compress_array</font><font color="#0000ff"><b>(</b></font>\<font color="#1f32ff">@a</font>,1<font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$cc</font>=<font color="#8000ff"><b>Bio::Matrix::PSM::SiteMatrix</b></font>::<font color="#ff8204">_compress_array</font><font color="#0000ff"><b>(</b></font>\<font color="#1f32ff">@c</font>,1<font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$cg</font>=<font color="#8000ff"><b>Bio::Matrix::PSM::SiteMatrix</b></font>::<font color="#ff8204">_compress_array</font><font color="#0000ff"><b>(</b></font>\<font color="#1f32ff">@g</font>,1<font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ct</font>=<font color="#8000ff"><b>Bio::Matrix::PSM::SiteMatrix</b></font>::<font color="#ff8204">_compress_array</font><font color="#0000ff"><b>(</b></font>\<font color="#1f32ff">@t</font>,1<font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$dbid</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">table_insert</font><font color="#0000ff"><b>(</b></font><font color="#007400">'DB_source'</font>,<font color="#1f32ff">$dbname</font>,<font color="#4169e1"><b>undef</b></font><font color="#0000ff"><b>)</b></font>;
    <font color="#1f32ff">$matrix_i</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$dbid</font>,<font color="#1f32ff">$matrix</font>-&gt;accession_number,<font color="#1f32ff">$ca</font>,<font color="#1f32ff">$cc</font>,<font color="#1f32ff">$cg</font>,<font color="#1f32ff">$ct</font>,<font color="#007400">'na'</font><font color="#0000ff"><b>)</b></font>;
    <font color="#1f32ff">$matrix_q</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$dbid</font>,<font color="#1f32ff">$matrix</font>-&gt;accession_number,<font color="#007400">'na'</font>,<font color="#1f32ff">$pid</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$mid</font>=<font color="#1f32ff">$matrix_q</font>-&gt;fetchrow_array;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$mid</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE3"></A><B>store_matrix_info</B></TD><TD><A HREF="#POD3">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE2">prev</A></TD><TD WIDTH="30">next</TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>store_matrix_info</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$mid</font>, <font color="#1f32ff">$species</font>,<font color="#1f32ff">$ref</font>,<font color="#1f32ff">$type</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$matrix_i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"insert into matrix_info (matrix_id,species,pubmed,exptype) values (<font color="#1f32ff">$mid</font>, '$species', '$ref', '$type')"</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$matrix_i</font>-&gt;execute;</pre>}<BR>
<A NAME="General"></A>
<HR><H2>General documentation</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_To do"><B>To do</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre></pre>
</TD></TR>
</TABLE>
</body>
</html>
