<head>
<!-- Generated by perlmod2www.pl -->
<title>
analysis documentation.
</title>
</head>
<body bgcolor="white">
<HR><H4>regdb</H4>
<H3>analysis</H3>
<A NAME="TOP"></A>
<TABLE BORDER="1" WIDTH="100%"><TR>
<TD><A HREF="#libs">Included libraries</A></TD>
<TD><A HREF="#vardefs">Package variables</A></TD>
<TD><A HREF="#General">General documentation</A></TD>
<TD><A HREF="#Methods">Methods</A></TD>
</TR></TABLE><HR>
<A NAME="vardefs"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Package variables</B></TD>
<TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0" WIDTH="100%"><TR><TD COLSPAN="2">No package variables defined.</TD></TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD WIDTH="150"><B>Included modules</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Annotation::Collection</font></b> </TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Annotation::Comment</font></b> </TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Annotation::DBLink</font></b> </TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Matrix::PSM::InstanceSite</font></b> </TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Seq</font></b> </TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">Bio::Species</font></b> </TD></TR>
</TABLE>
<A NAME="libs"></A><TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Inherit</B></TD>
<TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD><b><font color="red">Unavailable</font></b></TD></TR>
</TABLE>
<A NAME="SYNOPSIS"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Synopsis</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><FONT COLOR="RED">No synopsis!</FONT></TD></TR></TABLE>
<A NAME="DESCRIPTION"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Description</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><FONT COLOR="RED">No description!</FONT></TD></TR></TABLE>
<A NAME="Methods"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Methods</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE>
<TABLE BORDER="1" CELLSPACING="5"><TR><TD><B>analysis_by_genesource</B></TD><TD><A HREF="#POD1">Description</A></TD><TD><A HREF="#CODE1">Code</A></TD></TR>
<TR><TD><B>get_analysis_IO_by_regseq</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE2">Code</A></TD></TR>
<TR><TD><B>get_analysis_by_ref</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE3">Code</A></TD></TR>
<TR><TD><B>get_analysis_by_regseq</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE4">Code</A></TD></TR>
<TR><TD><B>get_analysis_input_by_IO</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE5">Code</A></TD></TR>
<TR><TD><B>get_analysis_output_by_IO</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE6">Code</A></TD></TR>
<TR><TD><B>get_causal_relation</B></TD><TD><A HREF="#POD2">Description</A></TD><TD><A HREF="#CODE7">Code</A></TD></TR>
<TR><TD><B>get_cell_by_aid</B></TD><TD><A HREF="#POD3">Description</A></TD><TD><A HREF="#CODE8">Code</A></TD></TR>
<TR><TD><B>get_curated</B></TD><TD><A HREF="#POD4">Description</A></TD><TD><A HREF="#CODE9">Code</A></TD></TR>
<TR><TD><B>get_inputs_by_analysis</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE10">Code</A></TD></TR>
<TR><TD><B>get_many_by_one</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE11">Code</A></TD></TR>
<TR><TD><B>get_pubmed_by_aid</B></TD><TD><A HREF="#POD5">Description</A></TD><TD><A HREF="#CODE12">Code</A></TD></TR>
<TR><TD><B>get_simple_relation</B></TD><TD><A HREF="#POD6">Description</A></TD><TD><A HREF="#CODE13">Code</A></TD></TR>
<TR><TD><B>get_simple_relation_by_input</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE14">Code</A></TD></TR>
<TR><TD><B>get_singles_by_analysis</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE15">Code</A></TD></TR>
<TR><TD><B>next_homolog_set</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE16">Code</A></TD></TR>
<TR><TD><B>return_init_table</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE17">Code</A></TD></TR>
<TR><TD><B>store_analysis</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE18">Code</A></TD></TR>
<TR><TD><B>store_condition</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE19">Code</A></TD></TR>
<TR><TD><B>store_io</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE20">Code</A></TD></TR>
<TR><TD><B>store_many_to_one_io</B></TD><TD><A HREF="#POD7">Description</A></TD><TD><A HREF="#CODE21">Code</A></TD></TR>
</TABLE>
<A NAME="MethDesc"></A>
<HR><H2>Methods description</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_analysis_by_genesource"></A><A NAME="POD1"></A><B>analysis_by_genesource</B></TD><TD><A HREF="#CODE1">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD>prev</TD><TD><A HREF="#POD2">next</A></TD></TR></TABLE>
<pre> Usage   : my @analysisids=$regdb-&gt;analysis_by_genesource('ENSG0000.....');<BR> Function : Returns all analysis ids that are associated with CRE located near the gene of interest<BR> Returns : array<BR> Args    :  gene_source primary key<BR> Warnings: DBI related<BR> Todo   : Introduce checks<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_get_causal_relation"></A><A NAME="POD2"></A><B>get_causal_relation</B></TD><TD><A HREF="#CODE7">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD1">prev</A></TD><TD><A HREF="#POD3">next</A></TD></TR></TABLE>
<pre> Usage   : $self-&gt;get_causal_relation('i',$id);<BR> Returns : array: i/o primary keys that are the cause/consequence of the argument primary key<BR> Args    : the type of query (cause='i', consequence='o'), followed by primary key for the input_analysis/output_analysis table<BR> To do   : Introduce checks.<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_get_cell_by_aid"></A><A NAME="POD3"></A><B>get_cell_by_aid</B></TD><TD><A HREF="#CODE8">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD2">prev</A></TD><TD><A HREF="#POD4">next</A></TD></TR></TABLE>
<pre> Usage   : my $pubmed=$regdb-&gt;get_cell_by_aid($aid);<BR> Function : Get the cell related data<BR> Returns :  NAME, TISSUE, STATUS, DESC, SPECIES in this order<BR> Args    :  analysis primary key<BR> Warnings: DBI related<BR> Todo   : Introduce checks<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_get_curated"></A><A NAME="POD4"></A><B>get_curated</B></TD><TD><A HREF="#CODE9">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD3">prev</A></TD><TD><A HREF="#POD5">next</A></TD></TR></TABLE>
<pre> Usage   : my @an=$pazar-&gt;get_curated; <BR> Function : returns only curator prepared analysis<BR> Returns : <BR> Args    : <BR> Warnings: <BR> Exceptions : <BR> Todo   : Introduce checks<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_get_pubmed_by_aid"></A><A NAME="POD5"></A><B>get_pubmed_by_aid</B></TD><TD><A HREF="#CODE12">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD4">prev</A></TD><TD><A HREF="#POD6">next</A></TD></TR></TABLE>
<pre> Usage   : my $pubmed=$regdb-&gt;get_pubmed_by_aid($aid);<BR> Function : Get publication upon which an analysis entry is based<BR> Returns :pubmed id<BR> Args    :  analysis primary key<BR> Warnings: DBI related<BR> Todo   : Introduce checks<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_get_simple_relation"></A><A NAME="POD6"></A><B>get_simple_relation</B></TD><TD><A HREF="#CODE13">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD5">prev</A></TD><TD><A HREF="#POD7">next</A></TD></TR></TABLE>
<pre> Usage   : $self-&gt;get_simple_relation('analysis_input',$id);<BR> Returns : single related key<BR> Args    : initial table (analysis_input/analysis_output) and primary key from that table<BR> To do   : Introduce checks.<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_store_many_to_one_io"></A><A NAME="POD7"></A><B>store_many_to_one_io</B></TD><TD><A HREF="#CODE21">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD6">prev</A></TD><TD><A HREF="#POD8">next</A></TD></TR></TABLE>
<pre> Usage   : $self-&gt;store_many_to_one_io('i','o',12,@all);<BR> Returns : primary key for the 'one' table, reference to an array of primary keys for the 'many' table<BR> Args    : 'many' table type (i or o), 'one' table type, one table id, array of 'many' table ids<BR> To do   : Introduce checks. How to deal with many to many: many null single entries to the same set?<BR> Warning : If there is 'one' table id stored with null partner, there can't be more such entries<BR></pre>
<A NAME="MethCode"></A>
<HR><H2>Methods code</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE1"></A><B>analysis_by_genesource</B></TD><TD><A HREF="#POD1">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30">prev</TD><TD WIDTH="30"><A HREF="#CODE2">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>analysis_by_genesource</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$gene</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@aid</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$sth</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select distinct reg_seq_id from TSR_reg_seq a, TSR b where gene_source_id='$gene'
                        and a.TSR_reg_seq_id=b.TSR_reg_seq_id"</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ath</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select distinct analysis_id from analysis_input where io_type_id=?"</font><font color="#0000ff"><b>)</b></font>;
    <font color="#1f32ff">$sth</font>-&gt;execute||die;
    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$regseq</font>=<font color="#1f32ff">$sth</font>-&gt;fetchrow_array<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
        <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$io</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_IO_type_id</font><font color="#0000ff"><b>(</b></font><font color="#007400">'reg_seq'</font>,<font color="#1f32ff">$regseq</font><font color="#0000ff"><b>)</b></font>;<font color="#ff0000">##Here for example the pre-prepared statements pay off</font><BR>        <font color="#1f32ff">$ath</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$io</font><font color="#0000ff"><b>)</b></font>;
        <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$aid</font>=<font color="#1f32ff">$ath</font>-&gt;fetchrow_array<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
            <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@aid</font>,<font color="#1f32ff">$aid</font>;
        <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">@aid</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE2"></A><B>get_analysis_IO_by_regseq</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE1">prev</A></TD><TD WIDTH="30"><A HREF="#CODE3">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_analysis_IO_by_regseq</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$regseq</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$aid</font>,<font color="#1f32ff">$inputid</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_analysis_by_regseq</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$regseq</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>return</b></font> <font color="#4169e1"><b>undef</b></font> <font color="#0000ff"><b>unless</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$sth</font>-&gt;fetchrow_array;
<font color="#ff0000">##print $aid,':',$inputid;</font><BR><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>inputs<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_inputs_by_analysis</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>outputs<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_causal_relation</font><font color="#0000ff"><b>(</b></font><font color="#007400">'i'</font>,<font color="#1f32ff">$inputid</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$aid</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE3"></A><B>get_analysis_by_ref</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE2">prev</A></TD><TD WIDTH="30"><A HREF="#CODE4">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_analysis_by_ref</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$ref</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$refid</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'ref'</font>,<font color="#1f32ff">$ref</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@aid</font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ath</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select distinct analysis_id from analysis where ref_id='$refid'"</font><font color="#0000ff"><b>)</b></font>;
    <font color="#1f32ff">$ath</font>-&gt;execute;
    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$aid</font>=<font color="#1f32ff">$ath</font>-&gt;fetchrow_array<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
        <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@aid</font>,<font color="#1f32ff">$aid</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">@aid</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE4"></A><B>get_analysis_by_regseq</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE3">prev</A></TD><TD WIDTH="30"><A HREF="#CODE5">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_analysis_by_regseq</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$regseq</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ioid</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'io_type'</font>,<font color="#1f32ff">$regseq</font>,<font color="#007400">'reg_seq'</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>return</b></font> <font color="#4169e1"><b>undef</b></font> <font color="#0000ff"><b>unless</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$ioid</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$sth</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select analysis_id,analysis_input_id from analysis_input where io_type_id=?"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#1f32ff">$sth</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$ioid</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$sth</font>-&gt;fetchrow_array;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE5"></A><B>get_analysis_input_by_IO</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE4">prev</A></TD><TD WIDTH="30"><A HREF="#CODE6">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_analysis_input_by_IO</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$io</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>; <font color="#ff0000">##$io is a reference to an array, maybe make it smart- recognize scalars?</font><BR><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">%aid</font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select * from analysis_input where io_type_id=?"</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ioid</font> <font color="#0000ff"><b>(</b></font>@$io<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$ioid</font><font color="#0000ff"><b>)</b></font>;<font color="#ff0000">##Natural unique constraints???</font><BR>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$all</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;fetchall_arrayref;
    <font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$row</font> <font color="#0000ff"><b>(</b></font>@$all<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
        <font color="#1f32ff">$aid</font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$row</font>-&gt;<font color="#0000ff"><b>[</b></font>2<font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$row</font>;
    <font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$row</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE6"></A><B>get_analysis_output_by_IO</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE5">prev</A></TD><TD WIDTH="30"><A HREF="#CODE7">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_analysis_output_by_IO</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$io</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE7"></A><B>get_causal_relation</B></TD><TD><A HREF="#POD2">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE6">prev</A></TD><TD WIDTH="30"><A HREF="#CODE8">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_causal_relation</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$poi</font>,<font color="#1f32ff">$id</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$resultid</font>=<font color="#1f32ff">$poi</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">'i'</font> ?<font color="#007400">'analysis_output_id'</font>:<font color="#007400">'analysis_input_id'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$os</font>=<font color="#1f32ff">$poi</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">'i'</font> ? <font color="#007400">'o'</font>:<font color="#007400">'i'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$itable</font>=<font color="#007400">'analysis_'</font> . <font color="#1f32ff">$poi</font> .<font color="#007400">'_link'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$endtable</font>=<font color="#007400">'analysis_'</font> . <font color="#1f32ff">$os</font> .<font color="#007400">'_link'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ikey</font>=<font color="#1f32ff">$itable</font>.<font color="#007400">'_id'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$endkey</font>=<font color="#1f32ff">$endtable</font>.<font color="#007400">'_id'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$startkey</font>=<font color="#1f32ff">$poi</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">'i'</font> ?<font color="#007400">'analysis_input_id'</font>:<font color="#007400">'analysis_output_id'</font>;
<font color="#ff0000">##print join(':',$poi,$id,$resultid,$itable,$endtable);</font><BR><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ipkey</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$itable</font>,<font color="#1f32ff">$id</font>,0<font color="#0000ff"><b>)</b></font>;<font color="#ff0000">##In order to get the unique id, see store_many_to_one_io</font><BR><font color="#ff0000">##We don't have one to many, maybe we have many to one?</font><BR><font color="#0000ff"><b>unless</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$ipkey</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font><font color="#ff0000">##If not many to one?</font><BR> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$sth</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select <font color="#1f32ff">$ikey</font> from <font color="#1f32ff">$itable</font> where <font color="#1f32ff">$startkey</font>=<font color="#1f32ff">$id</font>"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
 <font color="#1f32ff">$sth</font>-&gt;execute||die <font color="#1f32ff">$DBI</font>::errstr;
 <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$key</font>=<font color="#1f32ff">$sth</font>-&gt;fetchrow_array;
 <font color="#ff0000">##print 'statement:',&quot;select $resultid from $endtable where $ikey=$key&quot;;</font><BR> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select <font color="#1f32ff">$resultid</font> from <font color="#1f32ff">$endtable</font> where <font color="#1f32ff">$endkey</font>=<font color="#1f32ff">$key</font>"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>else</b></font> <font color="#0000ff"><b>{</b></font>
 <font color="#ff0000">##print 'statement:',&quot;select $resultid from $endtable where $ikey=$ipkey&quot;;</font><BR>    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select <font color="#1f32ff">$resultid</font> from <font color="#1f32ff">$endtable</font> where <font color="#1f32ff">$ikey</font>=<font color="#1f32ff">$ipkey</font>"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#0000ff"><b>}</b></font>
<font color="#ff0000">##print join (':','table_debug|',$resultid,$endtable,$ikey,$ipkey,'|');</font><BR><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;execute||die <font color="#1f32ff">$DBI</font>::errstr ;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;fetchrow_array;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE8"></A><B>get_cell_by_aid</B></TD><TD><A HREF="#POD3">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE7">prev</A></TD><TD WIDTH="30"><A HREF="#CODE9">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_cell_by_aid</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$analysis</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$method</font>,<font color="#1f32ff">$cellid</font>,<font color="#1f32ff">$time</font>,<font color="#1f32ff">$ref</font>,<font color="#1f32ff">$comment</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_data_by_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'analysis'</font>,<font color="#1f32ff">$analysis</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_data_by_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'cell'</font>,<font color="#1f32ff">$cellid</font><font color="#0000ff"><b>)</b></font>; <font color="#ff0000">##NAME, TISSUE, STATUS, DESC, SPECIES</font><BR></pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE9"></A><B>get_curated</B></TD><TD><A HREF="#POD4">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE8">prev</A></TD><TD WIDTH="30"><A HREF="#CODE10">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_curated</b></font>
 {<pre>	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$curh</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select analysis_id from analysis a, evidence b where a.evidence_id=b.evidence_id and
			project_id=? and status='curated'"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font>;
	<font color="#1f32ff">$curh</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>project_id<font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font>;
	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@res</font>;
	<font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$row</font>=<font color="#1f32ff">$curh</font>-&gt;fetchrow_array<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
		<font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@res</font>,<font color="#1f32ff">$row</font>;
	<font color="#0000ff"><b>}</b></font>
	<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">@res</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE10"></A><B>get_inputs_by_analysis</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE9">prev</A></TD><TD WIDTH="30"><A HREF="#CODE11">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_inputs_by_analysis</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$sth</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select analysis_input_id, io_type_id from analysis_input where analysis_id=?"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#1f32ff">$sth</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$sth</font>-&gt;fetchall_arrayref;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE11"></A><B>get_many_by_one</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE10">prev</A></TD><TD WIDTH="30"><A HREF="#CODE12">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_many_by_one</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$ones</font>,<font color="#1f32ff">$type</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>return</b></font> <font color="#4169e1"><b>undef</b></font> <font color="#0000ff"><b>unless</b></font> <font color="#0000ff"><b>(</b></font>@$ones&gt;0<font color="#0000ff"><b>)</b></font>;
<font color="#ff0000">##print join (';','ones',@$ones);</font><BR>
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$etype</font>=<font color="#1f32ff">$type</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">'input'</font>?<font color="#007400">'i'</font>:<font color="#007400">'o'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$itype</font>=<font color="#1f32ff">$type</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">'input'</font>?<font color="#007400">'o'</font>:<font color="#007400">'i'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ikey</font>=<font color="#007400">'analysis_'</font>.<font color="#1f32ff">$itype</font>.<font color="#007400">'_link_id'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$endkey</font>=<font color="#007400">'analysis_'</font>.<font color="#1f32ff">$etype</font>.<font color="#007400">'_link_id'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$endtable</font>=<font color="#007400">'analysis_'</font>.<font color="#1f32ff">$etype</font>.<font color="#007400">'_link'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$itable</font>=<font color="#007400">'analysis_'</font>.<font color="#1f32ff">$itype</font>.<font color="#007400">'_link'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$handle</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select <font color="#1f32ff">$ikey</font> from <font color="#1f32ff">$itable</font> where <font color="#1f32ff">$endkey</font>=?"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#ff0000">##print &quot;select $ikey from $itable where $endkey=?&quot;;</font><BR><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">%rel</font>;

<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$one</font> <font color="#0000ff"><b>(</b></font>@<font color="#0000ff"><b>{</b></font><font color="#1f32ff">$ones</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
<font color="#1f32ff">$rel</font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$type</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$one</font><font color="#0000ff"><b>}</b></font>=<font color="#007400">'none'</font>;
    <font color="#1f32ff">$handle</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$one</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$res</font>=<font color="#1f32ff">$handle</font>-&gt;fetchall_arrayref; 
    <font color="#1f32ff">$rel</font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$type</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$one</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$res</font>;
<font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>return</b></font>\% rel;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE12"></A><B>get_pubmed_by_aid</B></TD><TD><A HREF="#POD5">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE11">prev</A></TD><TD WIDTH="30"><A HREF="#CODE13">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_pubmed_by_aid</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$analysis</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$method</font>,<font color="#1f32ff">$cell</font>,<font color="#1f32ff">$time</font>,<font color="#1f32ff">$refid</font>,<font color="#1f32ff">$comment</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_data_by_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'analysis'</font>,<font color="#1f32ff">$analysis</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$ref</font>,<font color="#1f32ff">@rest</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_data_by_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'ref'</font>,<font color="#1f32ff">$refid</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$ref</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE13"></A><B>get_simple_relation</B></TD><TD><A HREF="#POD6">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE12">prev</A></TD><TD WIDTH="30"><A HREF="#CODE14">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_simple_relation</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$table</font>,<font color="#1f32ff">$key</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$tkey</font>=<font color="#1f32ff">$table</font>.<font color="#007400">'_id'</font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select * from analysis_i_link a, analysis_o_link b where a.analysis_i_link_id=b.analysis_i_link_id
    and a.analysis_o_link_id=b.analysis_o_link_id and <font color="#1f32ff">$tkey</font>=<font color="#1f32ff">$key</font>"</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;execute;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;fetchrow_array;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE14"></A><B>get_simple_relation_by_input</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE13">prev</A></TD><TD WIDTH="30"><A HREF="#CODE15">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_simple_relation_by_input</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$aid</font>,<font color="#1f32ff">$input</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE15"></A><B>get_singles_by_analysis</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE14">prev</A></TD><TD WIDTH="30"><A HREF="#CODE16">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>get_singles_by_analysis</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$sth1</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select distinct analysis_i_link_id from analysis_i_link a, analysis_input b 
                        where a.analysis_input_id=b.analysis_input_id and b.analysis_id=?
                        and a.analysis_o_link_id=0"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#1f32ff">$sth1</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$in</font>=<font color="#1f32ff">$sth1</font>-&gt;fetchrow_array;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$sth2</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select distinct a.analysis_o_link_id from analysis_o_link a, analysis_input b, analysis_i_link c 
                        where c.analysis_input_id=b.analysis_input_id and b.analysis_id=?
                        and a.analysis_i_link_id=0 and c.analysis_o_link_id=a.analysis_o_link_id"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#1f32ff">$sth2</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#1f32ff">$DBI</font>::errstr;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$out</font>=<font color="#1f32ff">$sth2</font>-&gt;fetchall_arrayref;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$in</font>,<font color="#1f32ff">$out</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE16"></A><B>next_homolog_set</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE15">prev</A></TD><TD WIDTH="30"><A HREF="#CODE17">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>next_homolog_set</b></font>
 {<pre>	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
	<font color="#4169e1"><b>die</b></font> <font color="#0000ff"><b>unless</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>projectid<font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>;<font color="#ff0000">##No kidding</font><BR>	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$hsh</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select max(homolog_set_id) from homolog where project_id=?"</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font>;
	<font color="#1f32ff">$hsh</font>-&gt;<font color="#ff8204">execute</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>projectid<font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font>;
	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$hsid</font>=<font color="#1f32ff">$hsh</font>-&gt;fetchrow_array+1;
	<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$hsid</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE17"></A><B>return_init_table</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE16">prev</A></TD><TD WIDTH="30"><A HREF="#CODE18">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>return_init_table</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$table</font>,<font color="#1f32ff">$id</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$key</font>=<font color="#1f32ff">$table</font> . <font color="#007400">'_id'</font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>dbh<font color="#0000ff"><b>}</b></font>-&gt;<font color="#ff8204">prepare</font><font color="#0000ff"><b>(</b></font><font color="#007400">"select io_type_id from <font color="#1f32ff">$table</font> where <font color="#1f32ff">$key</font>=<font color="#1f32ff">$id</font>"</font><font color="#0000ff"><b>)</b></font>;
<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;execute;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$ioid</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font>current_handle<font color="#0000ff"><b>}</b></font>-&gt;fetchrow_array;
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">get_data_by_primary_key</font><font color="#0000ff"><b>(</b></font><font color="#007400">'io_type'</font>,<font color="#1f32ff">$ioid</font><font color="#0000ff"><b>)</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE18"></A><B>store_analysis</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE17">prev</A></TD><TD WIDTH="30"><A HREF="#CODE19">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>store_analysis</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$aid</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">@iaid</font>,<font color="#1f32ff">@oaid</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">%inputs</font>=<font color="#1f32ff">$self</font>-&gt;get_all_inputs;
<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$intype</font> <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>keys</b></font> <font color="#1f32ff">%inputs</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
    <font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$inputid</font> <font color="#0000ff"><b>(</b></font>@<font color="#0000ff"><b>{</b></font><font color="#1f32ff">$inputs</font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$intype</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
        <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$idin</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">store_IO_type</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$inputid</font>,<font color="#1f32ff">$intype</font><font color="#0000ff"><b>)</b></font>;
       <font color="#ff0000">##print &quot;Type $intype Stored as $idin &quot;;</font><BR>        <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@iaid</font>,<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">table_insert</font><font color="#0000ff"><b>(</b></font><font color="#007400">'analysis_input'</font>,<font color="#1f32ff">$aid</font>,<font color="#1f32ff">$idin</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">%outputs</font>=<font color="#1f32ff">$self</font>-&gt;get_all_outputs;
<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$outtype</font> <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>keys</b></font> <font color="#1f32ff">%outputs</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
    <font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$outputid</font> <font color="#0000ff"><b>(</b></font>@<font color="#0000ff"><b>{</b></font><font color="#1f32ff">$outputs</font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$outtype</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
        <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$outputid</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">store_IO_type</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$outputid</font>,<font color="#1f32ff">$outtype</font><font color="#0000ff"><b>)</b></font>;
       <font color="#ff0000">##print &quot;Type  out $outtype Stored as $outputid &quot;;</font><BR>        <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@oaid</font>,<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">table_insert</font><font color="#0000ff"><b>(</b></font><font color="#007400">'analysis_output'</font>,<font color="#1f32ff">$outputid</font><font color="#0000ff"><b>)</b></font>; 
    <font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>}</b></font>
<font color="#ff0000">##print &quot;Inputs:&quot;,join(':',@iaid);</font><BR><font color="#ff0000">##print &quot;Inputs:&quot;,join(':',@oaid);</font><BR><font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">join_IO_mm</font><font color="#0000ff"><b>(</b></font>\<font color="#1f32ff">@iaid</font>,\<font color="#1f32ff">@oaid</font><font color="#0000ff"><b>)</b></font>||<font color="#4169e1"><b>die</b></font> <font color="#007400">"Couldn't link\n"</font>; <font color="#ff0000">##Linked!!! Finally!</font><BR></pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE19"></A><B>store_condition</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE18">prev</A></TD><TD WIDTH="30"><A HREF="#CODE20">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>store_condition</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$type</font>,<font color="#1f32ff">$mol</font>,<font color="#1f32ff">$desc</font>,<font color="#1f32ff">$conc</font>,<font color="#1f32ff">$scale</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE20"></A><B>store_io</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE19">prev</A></TD><TD WIDTH="30"><A HREF="#CODE21">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>store_io</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">@in</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@ids</font>;
<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$in</font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">@in</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$id</font>=<font color="#1f32ff">$in</font> .<font color="#007400">'_id'</font>;
    <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@ids</font>,<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">table_insert</font><font color="#0000ff"><b>(</b></font><font color="#007400">'io_type'</font>,<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#1f32ff">$id</font><font color="#0000ff"><b>}</b></font>,<font color="#1f32ff">$in</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">@ids</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE21"></A><B>store_many_to_one_io</B></TD><TD><A HREF="#POD7">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE20">prev</A></TD><TD WIDTH="30">next</TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>store_many_to_one_io</b></font>
 {<pre><font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>,<font color="#1f32ff">$q</font>,<font color="#1f32ff">$t</font>,<font color="#1f32ff">$id</font>,<font color="#1f32ff">@ids</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">@_</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$manytable</font>=<font color="#007400">'analysis_'</font> . <font color="#1f32ff">$q</font> .<font color="#007400">'_link'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$onetable</font>=<font color="#007400">'analysis_'</font> . <font color="#1f32ff">$t</font> .<font color="#007400">'_link'</font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$onepkey</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">table_insert</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$onetable</font>,<font color="#007400">''</font>,<font color="#1f32ff">$id</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$pkey</font>;
<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$mid</font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">@ids</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
    <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@pkey</font>,<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">table_insert</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$manytable</font>,<font color="#1f32ff">$onepkey</font>,<font color="#1f32ff">$mid</font><font color="#0000ff"><b>)</b></font>;
<font color="#0000ff"><b>}</b></font>
<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$onepkey</font>,\<font color="#1f32ff">@pkey</font>;</pre>}<BR>
<A NAME="General"></A>
<HR><H2>General documentation</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
</TABLE>
<B>No general documentation available.</B><BR>
</body>
</html>
